# 赛时
8:20：开题，T1 很一眼，T2 一眼二分答案+ $n ^ 2$ dp，T3 不太会，T4 感觉做过。

8:30：开始写 T1，一开始写的暴力，然后发现可以线性筛以后用质数重新筛一遍就行了。

8:34：大样例跑了 2s 左右，想着应该是机子的问题，后面再来卡常。

8:50：T2 有了一个初步的想法，就是二分以后用 $f_{i, j}$ 表示前 $i$ 个里面选 $j$ 个进行修改是否可行，然后用一个 map 辅助转移，但是状态过多了，所以就没有写。

9:00：想 T4，感觉很像 NOI2014 起床困难综合症，但是这道题还要修改，所以就开始往线段树上面想了。

一开始想的是维护左右端点的操作和操作是 0/1 时最后的答案时多少。

但是发现这个东西中的右端点是没有用的，每个 $[l, r]$ 从 $[l, mid]$ 和 $[mid + 1, r]$ 转移过来一定只会考虑中间分界的地方，所以我只保留了右端点。

然后就是普通的线段树了，只是 psu 多一点。

10:00：阴减又开始作妖，一直在哪里唱：“你是个 rapper，他也是个 rapper，我可不是一个 rapper。”，然后又来一句：“从我成年那天我就想要住进上海。”，最后大唱一句：“直到我戴上了 ghost face。”，他给我比了手势，我以为他过了 D（结果赛后他说他写的是 A），于是我赶紧继续调题。

10:20：大样例全输出的 365，结果发现是我 psu 里面写错了，改了以后就对了，但是要跑 2.4s，只能在心中祈祷 hzy 的机子快一点。

10:30：去了一趟厕所，T2 想到了一个特别神奇的做法（这个贪心和正解的 dp 基本一样）：

具体来说就是二分的 $x$ 我们可以将序列分成若干块，然后对于每一块假设其固定，往左右扩展。如果扩展的块靠边的 $t$ 个能直接和已经固定的连接，就直接确定这几个。

如果没有成功就分成 4 类讨论以下就行了。
